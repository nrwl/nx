{
  "name": "migrate-development-custom-condition",
  "version": "21.5.0-beta.2",
  "description": "Migrate the legacy 'development' custom condition to a workspace-unique custom condition name.",
  "factory": "./src/migrations/update-21-5-0/migrate-development-custom-condition",
  "implementation": "/packages/js/src/migrations/update-21-5-0/migrate-development-custom-condition.ts",
  "aliases": [],
  "hidden": false,
  "path": "/packages/js",
  "schema": null,
  "type": "migration",
  "examplesFile": "#### Migrate `development` custom condition to unique workspace-specific name\n\nReplace the TypeScript `development` custom condition with a unique workspace-specific name to avoid conflicts when consuming packages in other workspaces.\n\n#### Examples\n\nThe migration will update the custom condition name in both `tsconfig.base.json` and all workspace package.json files that use the `development` custom condition:\n\n{% tabs %}\n{% tab label=\"Before\" %}\n\n```json {% fileName=\"tsconfig.base.json\" highlightLines=[\"3\"] %}\n{\n  \"compilerOptions\": {\n    \"customConditions\": [\"development\"]\n  }\n}\n```\n\n{% /tab %}\n\n{% tab label=\"After\" %}\n\n```json {% fileName=\"tsconfig.base.json\" highlightLines=[\"3\"] %}\n{\n  \"compilerOptions\": {\n    \"customConditions\": [\"@my-org/source\"] // assuming the root package.json name is `@my-org/source`\n  }\n}\n```\n\n{% /tab %}\n{% /tabs %}\n\nThe migration also updates `package.json` files that use the `development` condition in their `exports` field and point to TypeScript files:\n\n{% tabs %}\n{% tab label=\"Before\" %}\n\n```json {% fileName=\"libs/my-lib/package.json\" highlightLines=[\"5\"] %}\n{\n  \"name\": \"@myorg/my-lib\",\n  \"exports\": {\n    \".\": {\n      \"development\": \"./src/index.ts\",\n      \"default\": \"./dist/index.js\"\n    }\n  }\n}\n```\n\n{% /tab %}\n\n{% tab label=\"After\" %}\n\n```json {% fileName=\"libs/my-lib/package.json\" highlightLines=[\"5\"] %}\n{\n  \"name\": \"@myorg/my-lib\",\n  \"exports\": {\n    \".\": {\n      \"@my-org/source\": \"./src/index.ts\",\n      \"default\": \"./dist/index.js\"\n    }\n  }\n}\n```\n\n{% /tab %}\n{% /tabs %}\n\nIf the custom condition is not set to `[\"development\"]` or the `package.json`'s `exports` field doesn't point to TypeScript files, the migration will not modify the configuration:\n\n{% tabs %}\n{% tab label=\"Before\" %}\n\n```json {% fileName=\"libs/my-lib/package.json\" highlightLines=[\"5\"] %}\n{\n  \"name\": \"@myorg/my-lib\",\n  \"exports\": {\n    \".\": {\n      \"development\": \"./dist/index.js\",\n      \"default\": \"./dist/index.js\"\n    }\n  }\n}\n```\n\n{% /tab %}\n\n{% tab label=\"After\" %}\n\n```json {% fileName=\"libs/my-lib/package.json\" highlightLines=[\"5\"] %}\n{\n  \"name\": \"@myorg/my-lib\",\n  \"exports\": {\n    \".\": {\n      \"development\": \"./dist/index.js\",\n      \"default\": \"./dist/index.js\"\n    }\n  }\n}\n```\n\n{% /tab %}\n{% /tabs %}\n"
}
