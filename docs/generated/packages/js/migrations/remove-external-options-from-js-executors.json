{
  "name": "remove-external-options-from-js-executors",
  "version": "22.0.0-beta.0",
  "description": "Remove the deprecated `external` and `externalBuildTargets` options from the `@nx/js:swc` and `@nx/js:tsc` executors.",
  "factory": "./src/migrations/update-22-0-0/remove-external-options-from-js-executors",
  "implementation": "/packages/js/src/migrations/update-22-0-0/remove-external-options-from-js-executors.ts",
  "aliases": [],
  "hidden": false,
  "path": "/packages/js",
  "schema": null,
  "type": "migration",
  "examplesFile": "#### Remove the `external` and `externalBuildTargets` Options from the `@nx/js:swc` and `@nx/js:tsc` Executors\n\nRemove the deprecated `external` and `externalBuildTargets` options from the `@nx/js:swc` and `@nx/js:tsc` executors. These options were used for inlining dependencies, which was an experimental feature and has been deprecated for a long time. The migration only removes the options from the project configuration and target defaults. If you rely on inlining dependencies, you need to make sure they are all buildable or use a different build tool that supports bundling.\n\n#### Sample Code Changes\n\nRemove `external` and `externalBuildTargets` from the `@nx/js:swc` or `@nx/js:tsc` executor options in project configuration.\n\n{% tabs %}\n{% tab label=\"Before\" %}\n\n```json {% fileName=\"libs/my-lib/project.json\" highlightLines=[9,10] %}\n{\n  \"targets\": {\n    \"build\": {\n      \"executor\": \"@nx/js:swc\",\n      \"options\": {\n        \"main\": \"libs/my-lib/src/index.ts\",\n        \"outputPath\": \"dist/libs/my-lib\",\n        \"tsConfig\": \"libs/my-lib/tsconfig.lib.json\",\n        \"external\": [\"react\", \"react-dom\"],\n        \"externalBuildTargets\": [\"build\"]\n      }\n    }\n  }\n}\n```\n\n{% /tab %}\n{% tab label=\"After\" %}\n\n```json {% fileName=\"libs/my-lib/project.json\" %}\n{\n  \"targets\": {\n    \"build\": {\n      \"executor\": \"@nx/js:swc\",\n      \"options\": {\n        \"main\": \"libs/my-lib/src/index.ts\",\n        \"outputPath\": \"dist/libs/my-lib\",\n        \"tsConfig\": \"libs/my-lib/tsconfig.lib.json\"\n      }\n    }\n  }\n}\n```\n\n{% /tab %}\n{% /tabs %}\n\nRemove `external` and `externalBuildTargets` from the `@nx/js:swc` or `@nx/js:tsc` executor target defaults in `nx.json`.\n\n{% tabs %}\n{% tab label=\"Before\" %}\n\n```json {% fileName=\"nx.json\" highlightLines=[8,9] %}\n{\n  \"targetDefaults\": {\n    \"@nx/js:swc\": {\n      \"options\": {\n        \"main\": \"{projectRoot}/src/index.ts\",\n        \"outputPath\": \"dist/{projectRoot}\",\n        \"tsConfig\": \"{projectRoot}/tsconfig.lib.json\",\n        \"external\": \"all\",\n        \"externalBuildTargets\": [\"build\"]\n      }\n    }\n  }\n}\n```\n\n{% /tab %}\n{% tab label=\"After\" %}\n\n```json {% fileName=\"nx.json\" %}\n{\n  \"targetDefaults\": {\n    \"@nx/js:swc\": {\n      \"options\": {\n        \"main\": \"{projectRoot}/src/index.ts\",\n        \"outputPath\": \"dist/{projectRoot}\",\n        \"tsConfig\": \"{projectRoot}/tsconfig.lib.json\"\n      }\n    }\n  }\n}\n```\n\n{% /tab %}\n{% /tabs %}\n"
}
