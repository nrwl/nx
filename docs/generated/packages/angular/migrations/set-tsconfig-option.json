{
  "name": "set-tsconfig-option",
  "version": "21.5.0-beta.0",
  "description": "Set the 'tsConfig' option to build and test targets to help with Angular migration issues.",
  "factory": "./src/migrations/update-21-5-0/set-tsconfig-option",
  "implementation": "/packages/angular/src/migrations/update-21-5-0/set-tsconfig-option.ts",
  "aliases": [],
  "hidden": false,
  "path": "/packages/angular",
  "schema": null,
  "type": "migration",
  "examplesFile": "#### Set `tsConfig` option for build and test targets\n\n- Set the `tsConfig` option in the target options for library build executors. It moves the value from the target `development` configuration and it doesn't set it if the option is already set.\n- Set `tsconfig.spec.json` as the `tsConfig` option in the target options for the `@nx/jest:jest` executor. It only does it if the file exists and the options is not already set.\n\n#### Examples\n\nThe migration will move the `tsConfig` option for library build executors (`@nx/angular:ng-packagr-lite` and `@nx/angular:package`) from the `development` configuration to the target options if it's not already set:\n\n{% tabs %}\n{% tab label=\"Before\" %}\n\n```json {% fileName=\"libs/lib1/project.json\" highlightLines=[\"7\"] %}\n{\n  \"targets\": {\n    \"build\": {\n      \"executor\": \"@nx/angular:ng-packagr-lite\",\n      \"configurations\": {\n        \"development\": {\n          \"tsConfig\": \"libs/lib1/tsconfig.lib.dev.json\"\n        }\n      }\n    }\n  }\n}\n```\n\n{% /tab %}\n\n{% tab label=\"After\" %}\n\n```json {% fileName=\"libs/lib1/project.json\" highlightLines=[\"6\",\"9\"] %}\n{\n  \"targets\": {\n    \"build\": {\n      \"executor\": \"@nx/angular:ng-packagr-lite\",\n      \"options\": {\n        \"tsConfig\": \"libs/lib1/tsconfig.lib.dev.json\"\n      },\n      \"configurations\": {\n        \"development\": {}\n      }\n    }\n  }\n}\n```\n\n{% /tab %}\n{% /tabs %}\n\nThe migration will set the `tsConfig` option for the `@nx/jest:jest` executor when the `tsconfig.spec.json` file exists and the option is not already set:\n\n{% tabs %}\n{% tab label=\"Before\" %}\n\n```json {% fileName=\"apps/app1/project.json\" %}\n{\n  \"targets\": {\n    \"test\": {\n      \"executor\": \"@nx/jest:jest\"\n    }\n  }\n}\n```\n\n{% /tab %}\n\n{% tab label=\"After\" %}\n\n```json {% fileName=\"apps/app1/project.json\" highlightLines=[\"6\"] %}\n{\n  \"targets\": {\n    \"test\": {\n      \"executor\": \"@nx/jest:jest\",\n      \"options\": {\n        \"tsConfig\": \"apps/app1/tsconfig.spec.json\"\n      }\n    }\n  }\n}\n```\n\n{% /tab %}\n{% /tabs %}\n\nIf the `tsConfig` option is already set in the target options, the migration will not modify the configuration:\n\n{% tabs %}\n{% tab label=\"Before\" %}\n\n```json {% fileName=\"libs/lib1/project.json\" highlightLines=[\"6\", \"10\"] %}\n{\n  \"targets\": {\n    \"build\": {\n      \"executor\": \"@nx/angular:ng-packagr-lite\",\n      \"options\": {\n        \"tsConfig\": \"libs/lib1/tsconfig.lib.json\"\n      },\n      \"configurations\": {\n        \"development\": {\n          \"tsConfig\": \"libs/lib1/tsconfig.lib.dev.json\"\n        }\n      }\n    }\n  }\n}\n```\n\n{% /tab %}\n\n{% tab label=\"After\" %}\n\n```json {% fileName=\"libs/lib1/project.json\" highlightLines=[\"6\", \"10\"] %}\n{\n  \"targets\": {\n    \"build\": {\n      \"executor\": \"@nx/angular:ng-packagr-lite\",\n      \"options\": {\n        \"tsConfig\": \"libs/lib1/tsconfig.lib.json\"\n      },\n      \"configurations\": {\n        \"development\": {\n          \"tsConfig\": \"libs/lib1/tsconfig.lib.dev.json\"\n        }\n      }\n    }\n  }\n}\n```\n\n{% /tab %}\n{% /tabs %}\n"
}
