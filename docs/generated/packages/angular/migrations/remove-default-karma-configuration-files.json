{
  "name": "remove-default-karma-configuration-files",
  "version": "21.5.0-beta.2",
  "requires": { "@angular/core": ">=20.2.0" },
  "description": "Remove any Karma configuration files that only contain the default content. The default configuration is automatically available without a specific project configurationfile.",
  "factory": "./src/migrations/update-21-5-0/remove-default-karma-configuration-files",
  "implementation": "/packages/angular/src/migrations/update-21-5-0/remove-default-karma-configuration-files.ts",
  "aliases": [],
  "hidden": false,
  "path": "/packages/angular",
  "schema": null,
  "type": "migration",
  "examplesFile": "#### Remove the Default Karma Configuration Files\n\nRemoves Karma configuration files that match the default configuration generated by Angular CLI to reduce boilerplate code in the workspace. The migration also removes the `karmaConfig` option from project targets when the configuration file is removed.\n\n#### Examples\n\nThe migration will remove `karma.conf.js` files that contain only default settings and update the project configuration:\n\n{% tabs %}\n{% tab label=\"Before\" %}\n\n```javascript {% fileName=\"apps/my-app/karma.conf.js\" %}\n// Karma configuration file, see link for more information\n// https://karma-runner.github.io/1.0/config/configuration-file.html\n\nmodule.exports = function (config) {\n  config.set({\n    basePath: '',\n    frameworks: ['jasmine', '@angular-devkit/build-angular'],\n    plugins: [\n      require('karma-jasmine'),\n      require('karma-chrome-launcher'),\n      require('karma-jasmine-html-reporter'),\n      require('karma-coverage'),\n      require('@angular-devkit/build-angular/plugins/karma'),\n    ],\n    client: {\n      jasmine: {\n        // you can add configuration options for Jasmine here\n        // the possible options are listed at https://jasmine.github.io/api/edge/Configuration.html\n        // for example, you can disable the random execution with `random: false`\n        // or set a specific seed with `seed: 4321`\n      },\n    },\n    jasmineHtmlReporter: {\n      suppressAll: true, // removes the duplicated traces\n    },\n    coverageReporter: {\n      dir: require('path').join(__dirname, '../../coverage/my-app'),\n      subdir: '.',\n      reporters: [{ type: 'html' }, { type: 'text-summary' }],\n    },\n    reporters: ['progress', 'kjhtml'],\n    browsers: ['Chrome'],\n    restartOnFileChange: true,\n  });\n};\n```\n\n```json {% fileName=\"apps/my-app/project.json\" highlightLines=[7] %}\n{\n  \"name\": \"my-app\",\n  \"targets\": {\n    \"test\": {\n      \"executor\": \"@angular-devkit/build-angular:karma\",\n      \"options\": {\n        \"karmaConfig\": \"apps/my-app/karma.conf.js\",\n        \"polyfills\": [\"zone.js\", \"zone.js/testing\"]\n      }\n    }\n  }\n}\n```\n\n{% /tab %}\n\n{% tab label=\"After\" %}\n\nFile `apps/my-app/karma.conf.js` is removed.\n\n```json {% fileName=\"apps/my-app/project.json\" %}\n{\n  \"name\": \"my-app\",\n  \"targets\": {\n    \"test\": {\n      \"executor\": \"@angular-devkit/build-angular:karma\",\n      \"options\": {\n        \"polyfills\": [\"zone.js\", \"zone.js/testing\"]\n      }\n    }\n  }\n}\n```\n\n{% /tab %}\n{% /tabs %}\n\nIf the Karma configuration contains customizations, the migration will preserve the file and configuration:\n\n{% tabs %}\n{% tab label=\"Before\" %}\n\n```javascript {% fileName=\"apps/custom-app/karma.conf.js\" %}\nmodule.exports = function (config) {\n  config.set({\n    basePath: '',\n    frameworks: ['jasmine', '@angular-devkit/build-angular'],\n    plugins: [\n      require('karma-jasmine'),\n      require('karma-chrome-launcher'),\n      require('karma-jasmine-html-reporter'),\n      require('karma-coverage'),\n      require('@angular-devkit/build-angular/plugins/karma'),\n    ],\n    browsers: ['ChromeHeadless'], // Custom browser configuration\n    restartOnFileChange: true,\n  });\n};\n```\n\n{% /tab %}\n\n{% tab label=\"After\" %}\n\n```javascript {% fileName=\"apps/custom-app/karma.conf.js\" %}\nmodule.exports = function (config) {\n  config.set({\n    basePath: '',\n    frameworks: ['jasmine', '@angular-devkit/build-angular'],\n    plugins: [\n      require('karma-jasmine'),\n      require('karma-chrome-launcher'),\n      require('karma-jasmine-html-reporter'),\n      require('karma-coverage'),\n      require('@angular-devkit/build-angular/plugins/karma'),\n    ],\n    browsers: ['ChromeHeadless'], // Custom browser configuration\n    restartOnFileChange: true,\n  });\n};\n```\n\n{% /tab %}\n{% /tabs %}\n"
}
