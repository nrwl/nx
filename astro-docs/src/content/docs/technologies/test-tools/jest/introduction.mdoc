---
title: Overview of the Nx Jest Plugin
description: The Nx Plugin for Jest contains executors and generators that support testing projects using Jest. This page also explains how to configure Jest on your Nx workspace.
sidebar:
  label: Introduction
filter: 'type:References'
---

[Jest](https://jestjs.io) is a JavaScript testing framework.

The `@nx/jest` plugin adds [inferred Jest targets](#configuration), a [Jest configuration generator](#add-jest-to-a-project), and CI-ready [test splitting](#unit-and-e2e-configurations).

You can use Jest with Nx without the plugin and still get [task caching](/docs/features/cache-task-results), [task orchestration](/docs/features/run-tasks), and the [project graph](/docs/features/explore-graph).

## Setup

### Add to an existing workspace

{% aside type="note" title="Keep Nx Package Versions In Sync" %}
Make sure to install the `@nx/jest` version that matches the version of `nx` in your repository. If the version numbers get out of sync, you can encounter some difficult to debug errors. You can [fix Nx version mismatches with this recipe](/docs/guides/tips-n-tricks/keep-nx-versions-in-sync).
Using `nx add` helps ensure the correct version is installed and configured.
{% /aside %}

```shell
nx add @nx/jest
```

Verify the inferred test target in the project details view:

```shell
nx show project my-app
```

### Add Jest to a project

Generate Jest configuration for an existing project:

```shell
nx g @nx/jest:configuration --project=my-app
```

Replace `my-app` with your project name.

The generator accepts framework-specific options. Pass the right flags for your project type:

{% tabs syncKey="framework" %}
{% tabitem label="React" %}

```shell
nx g @nx/jest:configuration --project=my-react-lib --supportTsx
```

Enables the JSX/TSX transform so Jest can process React components.

{% /tabitem %}
{% tabitem label="Angular" %}

```shell
nx g @nx/jest:configuration --project=my-angular-lib --setupFile=angular
```

Configures `jest-preset-angular` and keeps Angular snapshot serializers enabled.

{% /tabitem %}
{% tabitem label="Node / TypeScript" %}

```shell
nx g @nx/jest:configuration --project=my-node-lib --testEnvironment=node
```

Uses the `node` test environment instead of the default `jsdom`.

{% /tabitem %}
{% /tabs %}

See the full [configuration generator reference](/docs/technologies/test-tools/jest/generators#configuration) for all options.

{% aside type="tip" title="Framework generators handle this automatically" %}
When generating a new project with a framework generator, you can specify Jest as the test runner and Nx passes the correct options automatically:

```shell
nx g @nx/react:lib libs/my-react-lib --unitTestRunner=jest
nx g @nx/node:app apps/my-api --unitTestRunner=jest
```

{% /aside %}

## Local Development

Run tests:

```shell
nx test my-app
```

Watch for changes:

```shell
nx test my-app --watch
```

Run a specific file (positional argument or `--testFile`):

```shell
nx test my-app ./path/to/spec/file/user-profile.spec.ts
nx test my-app --testFile user-profile.spec.ts
```

Collect coverage:

```shell
nx test my-app --coverage
```

Snapshot example:

```typescript
describe('userProfile', () => {
  it('matches the saved snapshot', () => {
    expect(renderUserProfile()).toMatchSnapshot();
  });
});
```

Update snapshots with `-u`/`--updateSnapshot` and check snapshot files into source control.

## Configuration

### Task inference

The `@nx/jest` plugin infers tasks for any project with a Jest configuration file:

- `jest.config.js`
- `jest.config.ts`
- `jest.config.mjs`
- `jest.config.mts`
- `jest.config.cjs`
- `jest.config.cts`

### Plugin options

Configure the plugin in `nx.json`:

```json
// nx.json
{
  "plugins": [
    {
      "plugin": "@nx/jest/plugin",
      "options": {
        "targetName": "test"
      }
    }
  ]
}
```

| Option               | Type    | Default | Description                                                                                                                    |
| -------------------- | ------- | ------- | ------------------------------------------------------------------------------------------------------------------------------ |
| `targetName`         | string  | `test`  | Name of the inferred Jest target.                                                                                              |
| `ciTargetName`       | string  | none    | Creates a CI-only target for atomized test tasks.                                                                              |
| `ciGroupName`        | string  | none    | Custom group name for atomized tasks in Nx Cloud/UI.                                                                           |
| `disableJestRuntime` | boolean | `true`  | When `true`, Nx skips creating the Jest runtime and computes inputs/outputs itself. Set to `false` to enable the Jest runtime. |

`disableJestRuntime` defaults to `true` because the plugin treats it as enabled only when `options.disableJestRuntime !== false`. This reduces computation time for inferred tasks; set it to `false` if you need Jest runtime inference.

### Unit and e2e configurations

Use two plugin entries to separate unit and E2E Jest tasks, and enable CI splitting for E2E:

```json
// nx.json
{
  "plugins": [
    {
      "plugin": "@nx/jest/plugin",
      "exclude": ["e2e/**/*"],
      "options": {
        "targetName": "test"
      }
    },
    {
      "plugin": "@nx/jest/plugin",
      "include": ["e2e/**/*"],
      "options": {
        "targetName": "e2e",
        "ciTargetName": "e2e-ci"
      }
    }
  ]
}
```

`ciTargetName` enables [split E2E tasks](/docs/features/ci-features/split-e2e-tasks) so each test file runs as its own CI task with better caching and retries. Use `ciGroupName` if you want a custom group label.

### View inferred tasks

Open the project details view in Nx Console or run:

```shell
nx show project my-app
```

## CI Considerations

See [Set Up CI](/docs/guides/nx-cloud/setup-ci) for a complete CI configuration guide.

### Build and Test Only What Changed

```shell
nx affected -t build test typecheck lint
```

This uses the [project graph](/docs/features/explore-graph) to determine which projects are affected by your changes and only runs tasks for those.
Read more about [the benefits of `nx affected`](/docs/features/ci-features/affected).

### Remote Caching

Share build and typecheck cache results across your team and CI with [remote caching](/docs/features/ci-features/remote-cache):

```shell
nx connect
```

### Performance with parallelization

Typically, in CI it's recommended to use `nx affected -t test --parallel=[# CPUs] --runInBand` for the best performance.

This is because each jest process creates a workers based on system resources, running multiple projects via nx and using jest workers will create too many process overall causing the system to run slower than desired. Using the `--runInBand` flag tells jest to run in a single process. You can then leverage Nx parallelism to run multiple jest projects at once.

### Batch Mode

For large monorepos with many Jest projects, Batch mode can improve performance by batching compilation across projects into a single process.

```shell
NX_BATCH_MODE=true nx run-many -t test
```

## What's Next

{% cardgrid %}
{% linkcard title="Jest Configuration" description="Explore all Jest configuration options." href="https://jestjs.io/docs/configuration" /%}
{% linkcard title="Snapshot Testing" description="Learn how Jest snapshot testing works and when to use it." href="https://jestjs.io/docs/snapshot-testing" /%}
{% linkcard title="Split E2E Tasks" description="Distribute E2E tests across CI for better caching and retries." href="/docs/features/ci-features/split-e2e-tasks" /%}
{% linkcard title="Jest Generators Reference" description="Full API reference for @nx/jest generators." href="/docs/technologies/test-tools/jest/generators" /%}
{% linkcard title="Jest Executors Reference" description="Full API reference for @nx/jest executors." href="/docs/technologies/test-tools/jest/executors" /%}
{% /cardgrid %}
