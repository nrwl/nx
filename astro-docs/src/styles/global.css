@layer base, starlight, theme, components, utilities;

@import '@astrojs/starlight-tailwind';
@import 'tailwindcss/theme.css' layer(theme);
@import 'tailwindcss/utilities.css' layer(utilities);

@source '../../node_modules/@nx/nx-dev-*';

/* Custom styles for Nx documentation */

:root {
  --sl-sidebar-width: var(--container-2xs);
}

[data-has-sidebar] {
  --sl-content-inline-start: 0;
}

@media (min-width: 50em) {
  [data-has-sidebar] {
    --sl-content-inline-start: var(--container-2xs);
  }
}
/* Dark mode colors. */

:root[data-theme='dark'] {
  --sl-color-bg: var(--color-slate-900);
  --sl-color-bg-nav: var(--color-slate-800);
  --sl-color-bg-sidebar: var(--color-slate-900);
  --sl-color-hairline: var(--color-slate-700);
  --sl-color-hairline-shade: var(--color-slate-700);
  --sl-color-accent-low: var(--color-sky-800);
  --sl-color-accent: var(--color-sky-400);
  --sl-color-accent-high: var(--color-sky-300);
  --sl-color-text-accent: var(--color-sky-400);
  --sl-color-gray-1: var(--color-slate-100);
  --sl-color-gray-2: var(--color-slate-200);
  --sl-color-gray-3: var(--color-slate-300);
  --sl-color-gray-4: var(--color-slate-500);
  --sl-color-gray-5: var(--color-slate-700);
  --sl-color-gray-6: var(--color-slate-800);
}

/* Light mode colors. */
:root[data-theme='light'] {
  --sl-color-bg: var(--color-white);
  --sl-color-bg-nav: var(--color-slate-50);
  --sl-color-bg-sidebar: var(--color-white);
  --sl-color-hairline: var(--color-slate-300);
  --sl-color-hairline-shade: var(--color-slate-300);
  --sl-color-accent-low: var(--color-sky-100);
  --sl-color-accent: var(--color-sky-600);
  --sl-color-accent-high: var(--color-sky-700);
  --sl-color-text-accent: var(--color-sky-600);
  --sl-color-gray-1: var(--color-slate-900);
  --sl-color-gray-2: var(--color-slate-800);
  --sl-color-gray-3: var(--color-slate-600);
  --sl-color-gray-4: var(--color-slate-500);
  --sl-color-gray-5: var(--color-slate-300);
  --sl-color-gray-6: var(--color-slate-200);
}

/* Adaptive icons, like GitHub logo, etc. */
[data-theme='dark'] .adaptive-icon {
  filter: invert(1);
}

[data-theme='light'] .adaptive-icon {
  fill: black;
}

/* Custom font for code blocks */
@font-face {
  font-family: 'Input Mono';
  src: url('/fonts/InputMono-Regular.woff2') format('woff2'),
    url('/fonts/InputMono-Regular.woff') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

/* Apply custom font to code elements */
code,
pre {
  font-family: 'Input Mono', 'Menlo', 'Monaco', 'Courier New', monospace;
}

/* Rounded corners for code blocks and UI elements using CSS layers */
@layer components {
  /* Standalone code blocks (without headers) */
  pre:not(figure pre) {
    border-radius: var(--radius-lg);
    overflow: hidden;
  }

  /* Figure containers should have overall rounded corners */
  figure:has(pre) {
    border-radius: var(--radius-lg);
    overflow: hidden;
  }

  /* Header/title bar for code blocks should only have top corners rounded */
  figure > div:first-child:has(+ pre),
  figure > div:first-child:has(+ code),
  figure > figcaption:first-child,
  figure > div[class*='header'],
  figure > div[class*='title'] {
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    margin: 0;
    overflow: hidden;
  }

  /* Code content when it has a header should only have bottom corners rounded */
  figure:not(.has-title):not(.is-terminal) > pre {
    border-radius: var(--radius-lg);
    margin: 0;
    overflow: hidden;
  }

  /* If title exists, make sure code block does not have top corners rounded */
  figure.is-terminal > pre,
  figure.has-title > pre {
    border-radius: 0 0 var(--radius-lg) var(--radius-lg);
    margin: 0;
    overflow: hidden;
  }

  /* Ensure inner code elements don't overflow */
  figure pre code {
    border-radius: 0;
    overflow-x: auto;
    overflow-y: hidden;
  }

  /* Inline code */
  :not(pre) > code {
    border-radius: var(--radius-sm);
  }

  /* Search bar and inputs */
  input[type='search'],
  input[type='text'],
  .search-input,
  [data-pagefind-ui] input {
    border-radius: var(--radius-lg);
  }

  /* Buttons */
  button,
  .button,
  a[role='button'] {
    border-radius: var(--radius-md);
  }

  /* Cards and panels */
  .card,
  .panel,
  .content-panel {
    border-radius: var(--radius-lg);
  }

  /* Callouts and alerts */
  .callout,
  .alert,
  .note,
  .tip,
  .warning,
  .caution,
  aside {
    border-radius: var(--radius-lg);
  }
}

/* Additional custom styles can be added here */

/* Anchor link styles for headings */
.anchor-link {
  opacity: 0;
  text-decoration: none;
  margin-left: 0.5em;
  font-weight: normal;
  color: var(--sl-color-gray-3);
  transition: opacity 0.2s ease;
}

h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  opacity: 1;
}

.anchor-link:hover {
  color: var(--sl-color-accent);
}

.right-sidebar {
  border-inline-start: none;
}

.content-panel + .content-panel {
  border-top: 0;
}

iframe[src*='youtube'] {
  aspect-ratio: 16 / 9;
}

table code {
  word-wrap: break-word;
}
